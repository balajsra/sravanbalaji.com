const darkSwitch = document.getElementById("darkSwitch");
const documentElement = document.documentElement;

function initTheme() {
	const e =
		null !== localStorage.getItem("darkSwitch") &&
		"dark" === localStorage.getItem("darkSwitch");
	(darkSwitch.checked = e),
		e
			? documentElement.setAttribute("color-mode", "dark")
			: documentElement.setAttribute("color-mode", "light");
}

function resetTheme() {
	darkSwitch.checked
		? (documentElement.setAttribute("color-mode", "dark"),
		  localStorage.setItem("darkSwitch", "dark"))
		: (documentElement.setAttribute("color-mode", "light"),
		  localStorage.removeItem("darkSwitch"));
}

window.addEventListener("load", () => {
	darkSwitch &&
		(initTheme(),
		darkSwitch.addEventListener("change", () => {
			resetTheme();
		}));
});
