// Reference: https://github.com/coliff/dark-mode-switch

const darkSwitch = document.getElementById("darkSwitch");
const darkSwitchLabel = document.getElementById("darkSwitchLabel");
const documentElement = document.documentElement;

function initTheme() {
	const e =
		null !== localStorage.getItem("darkSwitch") &&
		"dark" === localStorage.getItem("darkSwitch");

	darkSwitch.checked = e;

	if (e) {
		documentElement.setAttribute("color-mode", "dark");
		darkSwitchLabel.innerHTML = "Dark Mode";
	} else {
		documentElement.setAttribute("color-mode", "light");
		darkSwitchLabel.innerHTML = "Light Mode";
	}
}

function resetTheme() {
	if (darkSwitch.checked) {
		documentElement.setAttribute("color-mode", "dark");
		localStorage.setItem("darkSwitch", "dark");
		darkSwitchLabel.innerHTML = "Dark Mode";
	} else {
		documentElement.setAttribute("color-mode", "light");
		localStorage.removeItem("darkSwitch");
		darkSwitchLabel.innerHTML = "Light Mode";
	}
}

$(document).ready(() => {
	darkSwitch &&
		(initTheme(),
		darkSwitch.addEventListener("change", () => {
			resetTheme();
		}));
});
